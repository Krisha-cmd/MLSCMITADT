<!DOCTYPE html>
<html lang="en">
<head>
    <link href="style.css" rel="stylesheet"/>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2 class="mlsc">MLSC</h2>
    <canvas class="canvas"></canvas>
    <script src="https://unpkg.com/gsap@3.9.2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/gsap.min.js" integrity="sha512-EZI2cBcGPnmR89wTgVnN3602Yyi7muWo8y1B3a8WmIv1J9tYG+udH4LvmYjLiGp37yHB7FfaPBo8ly178m9g4Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/ScrollTrigger.min.js" integrity="sha512-OzC82YiH3UmMMs6Ydd9f2i7mS+UFL5f977iIoJ6oy07AJT+ePds9QOEtqXztSH29Nzua59fYS36knmMcv79GOg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script >
        const canvas = document.querySelector('.canvas');
const context = canvas.getContext("2d");
let ball = { frame: 0 };
let frameCount;
const currentFrame = (index) => `./mlsc/${(index + 1).toString()}.jpg`;
const imgs = [];

function init() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    frameCount = window.innerWidth <= 768 ? 28 : 41;

    for (let i = 0; i < frameCount; i++) {
        const img = new Image();
        img.src = currentFrame(i);
        imgs.push(img);
        img.onload = render;
    }

    gsap.registerPlugin(ScrollTrigger);

    gsap.to(ball, {
        frame: frameCount - 1,
        snap: 'frame',
        ease: 'none',
        scrollTrigger: {
            scrub: true,
            pin: 'canvas',
            end: '500%',
            markers: false
        },
        onUpdate: render,
    });

    gsap.to(ball, {
        frame: frameCount - 1,
        duration: 2, // Adjust the duration (speed) as needed
        onUpdate: render
    });

    window.addEventListener('resize', handleResize);
}

function handleResize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    render();
}

function render() {
    context.clearRect(0, 0, canvas.width, canvas.height);

    const scaleWidth = canvas.width / imgs[Math.round(ball.frame)].width;
    const scaleHeight = canvas.height / imgs[Math.round(ball.frame)].height;

    let scale = Math.min(scaleWidth, scaleHeight);

    const isMobile = window.innerWidth <= 768;
    if (isMobile) {
        scale = Math.max(scaleWidth, scaleHeight);
    }

    const centerX = (canvas.width - imgs[Math.round(ball.frame)].width * scale) / 2 +10;
    const centerY = (canvas.height - imgs[Math.round(ball.frame)].height * scale) / 2;

    context.drawImage(imgs[Math.round(ball.frame)], centerX, centerY, imgs[Math.round(ball.frame)].width * scale, imgs[Math.round(ball.frame)].height * scale);
}

init();

    </script>
</body>
</html>
